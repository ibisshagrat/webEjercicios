(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"84Vf":function(o,r,i){"use strict";i.r(r),i.d(r,"PropietariosModule",(function(){return g}));var t=i("ofXK"),e=i("tyNb");class a{}var n=i("fXoL"),p=i("AytR"),s=i("JIr8"),c=i("IheW");let b=(()=>{class o{constructor(o){this.http=o,this.urlEndPoint=p.a.hostControladores+"propietarios"}getPropietarios(){return this.http.get(this.urlEndPoint)}getPropietario(o){return this.http.get(`${this.urlEndPoint}/${o}`)}borrarPropietario(o){return this.http.delete(`${this.urlEndPoint}/sin-correo/${o.id}`)}modificarPropietario(o){return this.http.put(`${this.urlEndPoint}/${o.id}`,o)}altaPropietaro(o){return this.http.post(this.urlEndPoint+"/sin-correo",o).pipe(Object(s.a)(o=>(alert(o.message),o)))}mapearPropietarios(o){let r=[];return o.forEach(o=>{r.push(this.mapearPropietario(o))}),console.log(r),r}mapearPropietario(o){let r=new a;return r.id=o.id,r.nombre=o.nombre,r.apellido1=o.apellido1,r.apellido2=o.apellido2,r.mail=o.mail,r.numeroCuenta=o.numeroCuenta,r.negocio=o.negocio,r.foto=o.foto,r.pedidos=o.pedidos,r.comentarios=o.comentarios,r}}return o.\u0275fac=function(r){return new(r||o)(n.Pb(c.a))},o.\u0275prov=n.Eb({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var l=i("3Pt+");let d=(()=>{class o{constructor(o,r,i){this.route=o,this.propietarioService=r,this.router=i,this.propietario=new a}ngOnInit(){this.getId(),this.tipoAcceso=this.esAlta?"Alta":"Modificar"}getId(){const o=this.route.snapshot.params.id;null!=o?(this.propietarioService.getPropietario(o).subscribe(o=>{this.propietario=o,console.log("dentro de la suscripcion",this.propietario.id)}),console.log("fuera de la subscripcion",this.propietario)):(this.esAlta=!0,this.propietario.nombre="",this.propietario.apellido1="",this.propietario.apellido2="")}onEnviar(){this.esAlta?this.propietarioService.altaPropietaro(this.propietario).subscribe(o=>{console.log("alta usuario ",this.propietario.nombre),this.router.navigate(["/propietarios"])}):(this.propietario.pedidos=null,this.propietarioService.modificarPropietario(this.propietario).subscribe(o=>{console.log("modificado usuario ",this.propietario.id),this.router.navigate(["/propietarios"])}))}}return o.\u0275fac=function(r){return new(r||o)(n.Ib(e.a),n.Ib(b),n.Ib(e.b))},o.\u0275cmp=n.Cb({type:o,selectors:[["app-propietario-form"]],decls:24,vars:5,consts:[["formParticipantes","ngForm"],[1,"row"],[1,"col-1"],["for","nombrePropietario"],[1,"col-3"],["id","nombrePropietario","type","text","name","id","required","",3,"ngModel","ngModelChange"],["for","apellido1Prop"],["type","text","id","apellido1Prop","name","apellido1","required","",3,"ngModel","ngModelChange"],["for","apellido2Prop"],["type","text","id","apellido2Prop","name","apellido2",3,"ngModel","ngModelChange"],["id","botonAceptar",1,"btn","btn-primary",3,"disabled","click"]],template:function(o,r){if(1&o&&(n.Lb(0,"h1"),n.mc(1),n.Kb(),n.Lb(2,"form",null,0),n.Lb(4,"div",1),n.Lb(5,"div",2),n.Lb(6,"label",3),n.mc(7,"Nombre"),n.Kb(),n.Kb(),n.Lb(8,"div",4),n.Lb(9,"input",5),n.Sb("ngModelChange",(function(o){return r.propietario.nombre=o})),n.Kb(),n.Kb(),n.Kb(),n.Lb(10,"div",1),n.Lb(11,"div",2),n.Lb(12,"label",6),n.mc(13,"Primer Apellido"),n.Kb(),n.Kb(),n.Lb(14,"div",4),n.Lb(15,"input",7),n.Sb("ngModelChange",(function(o){return r.propietario.apellido1=o})),n.Kb(),n.Kb(),n.Lb(16,"div",2),n.Lb(17,"label",8),n.mc(18,"Segundo Apellido"),n.Kb(),n.Kb(),n.Lb(19,"div",4),n.Lb(20,"input",9),n.Sb("ngModelChange",(function(o){return r.propietario.apellido2=o})),n.Kb(),n.Kb(),n.Kb(),n.Lb(21,"p"),n.Lb(22,"button",10),n.Sb("click",(function(){return r.onEnviar()})),n.mc(23,"Aceptar"),n.Kb(),n.Kb(),n.Kb()),2&o){const o=n.fc(3);n.xb(1),n.oc("",r.tipoAcceso," participante"),n.xb(8),n.ac("ngModel",r.propietario.nombre),n.xb(6),n.ac("ngModel",r.propietario.apellido1),n.xb(5),n.ac("ngModel",r.propietario.apellido2),n.xb(2),n.ac("disabled",!o.form.valid)}},directives:[l.n,l.e,l.f,l.b,l.k,l.d,l.g],encapsulation:2}),o})(),u=(()=>{class o{constructor(){this.borrar=new n.n}ngOnInit(){this.rutaEditar="editar/"+this.propietario.id}onBorrar(o){return this.borrar.emit(o)}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=n.Cb({type:o,selectors:[["app-propietario"]],inputs:{propietario:"propietario"},outputs:{borrar:"borrar"},decls:11,vars:5,consts:[[1,"row"],[1,"col-4"],[1,"col-3"],[1,"col-1"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-primary",3,"click"]],template:function(o,r){1&o&&(n.Lb(0,"div",0),n.Lb(1,"div",1),n.mc(2),n.Kb(),n.Lb(3,"div",2),n.mc(4),n.Kb(),n.Lb(5,"div",3),n.Lb(6,"button",4),n.mc(7,"Editar"),n.Kb(),n.Kb(),n.Lb(8,"div",3),n.Lb(9,"button",5),n.Sb("click",(function(){return r.onBorrar(r.propietario)})),n.mc(10,"Eliminar"),n.Kb(),n.Kb(),n.Kb()),2&o&&(n.xb(2),n.qc("",r.propietario.nombre," ",r.propietario.apellido1," ",r.propietario.apellido2,""),n.xb(2),n.nc(r.propietario.mail),n.xb(2),n.bc("routerLink",r.rutaEditar))},directives:[e.c],encapsulation:2}),o})();function h(o,r){if(1&o){const o=n.Mb();n.Lb(0,"div"),n.Lb(1,"app-propietario",7),n.Sb("borrar",(function(r){return n.gc(o),n.Ub().onBorrar(r)}))("nuevo",(function(r){return n.gc(o),n.Ub().onNuevo(r)})),n.Kb(),n.Kb()}if(2&o){const o=r.$implicit;n.xb(1),n.ac("propietario",o)}}const m=[{path:"",component:(()=>{class o{constructor(o){this.propietarioService=o,this.propietarios=[]}ngOnInit(){this.propietarioService.getPropietarios().subscribe(o=>{this.propietarios=this.propietarioService.mapearPropietarios(o)})}onBorrar(o){this.propietarioService.borrarPropietario(o).subscribe(r=>{console.log("Se elimina a ",o.nombre,o.apellido1,o.apellido2),this.propietarios=this.propietarios.filter(r=>r.id!==o.id)})}}return o.\u0275fac=function(r){return new(r||o)(n.Ib(b))},o.\u0275cmp=n.Cb({type:o,selectors:[["app-propietarios"]],decls:13,vars:1,consts:[["routerLink","alta",1,"btn","btn-primary"],[1,"row"],[1,"col-4"],[1,"col-3"],[1,"col-2"],[1,"w-100"],[4,"ngFor","ngForOf"],[3,"propietario","borrar","nuevo"]],template:function(o,r){1&o&&(n.Lb(0,"h2"),n.mc(1,"Propietarios"),n.Kb(),n.Lb(2,"button",0),n.mc(3,"Nuevo propietario"),n.Kb(),n.Lb(4,"div",1),n.Lb(5,"div",2),n.mc(6,"Nombre"),n.Kb(),n.Lb(7,"div",3),n.mc(8,"Email"),n.Kb(),n.Lb(9,"div",4),n.mc(10,"Acciones"),n.Kb(),n.Kb(),n.Jb(11,"hr",5),n.kc(12,h,2,1,"div",6)),2&o&&(n.xb(12),n.ac("ngForOf",r.propietarios))},directives:[e.c,t.k,u],encapsulation:2}),o})()},{path:"alta",component:d},{path:"editar/:id",component:d}];let f=(()=>{class o{}return o.\u0275mod=n.Gb({type:o}),o.\u0275inj=n.Fb({factory:function(r){return new(r||o)},providers:[b],imports:[[e.f.forChild(m)],e.f]}),o})(),g=(()=>{class o{}return o.\u0275mod=n.Gb({type:o}),o.\u0275inj=n.Fb({factory:function(r){return new(r||o)},imports:[[t.b,f,l.c]]}),o})()}}]);