(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{xF6X:function(t,a,r){"use strict";r.r(a),r.d(a,"PartidosModule",(function(){return I}));var i=r("ofXK"),e=r("tyNb"),o=r("fXoL"),s=r("AytR");class n{}var c=r("IheW");let d=(()=>{class t{constructor(t){this.http=t,this.urlDatosDeportivosPartidos=s.a.hostDatosDeportivos+"/partidos"}getPartidos(){return this.http.get(this.urlDatosDeportivosPartidos)}extraerPartidos(t){const a=[];return t._embedded.partidos.forEach(t=>{const r=this.extraerPartido(t);a.push(r)}),a}extraerPartido(t){const a=this.mapearPartido(t),r=t._links.self.href;a.id=r.slice(r.lastIndexOf("/")+1,r.length);const i=[];return this.http.get(`${this.urlDatosDeportivosPartidos}/${a.id}/sucesos`).subscribe(t=>{let a=t._embedded.goles;a&&i.push(...this.mapearSucesos(a)),a=t._embedded.tarjetas,a&&i.push(...this.mapearSucesos(a))}),a.sucesos=i,a}mapearPartido(t){const a=new n;return a.idLocal=t.idLocal,a.idVisitante=t.idVisitante,a.timeStamp=t.timeStamp,a.sucesos=t.sucesos,a}mapearSuceso(t){let a=null;return a=t.tipoTarjeta?{class:"Tarjeta",idParticipante:t.idParticipante,timestamp:t.timestamp,tipoTarjeta:"ROJA"==t.tipoTarjeta?"1":"2"}:{class:"Gol",idParticipante:t.idParticipante,timestamp:t.timestamp},a}mapearSucesos(t){const a=[];return t.forEach(t=>a.push(this.mapearSuceso(t))),a}}return t.\u0275fac=function(a){return new(a||t)(o.Pb(c.a))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=r("3Pt+");let l=(()=>{class t{constructor(){this.mostrarTarjeta=new o.n}ngOnInit(){}}return t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=o.Cb({type:t,selectors:[["app-partido"]],inputs:{partido:"partido"},outputs:{mostrarTarjeta:"mostrarTarjeta"},decls:7,vars:5,consts:[["id","botonTarjetas",1,"btn","btn-info",3,"disabled","click"]],template:function(t,a){1&t&&(o.Lb(0,"section"),o.Lb(1,"h3"),o.mc(2,"Partido del "),o.Kb(),o.Lb(3,"div"),o.mc(4),o.Kb(),o.Lb(5,"button",0),o.Sb("click",(function(){return a.mostrarTarjeta.emit(!0)})),o.mc(6," Mostrar Tarjetas "),o.Kb(),o.Kb()),2&t&&(o.xb(4),o.rc("",a.partido.idLocal," ",a.partido.marcadorLocal," - ",a.partido.marcadorVisitante," ",a.partido.idVisitante," "),o.xb(1),o.ac("disabled",!a.partido.hayTarjetas))},encapsulation:2}),t})();var u=r("wHSu"),b=r("6NWb");const h=function(t,a){return{tarjetaRoja:t,tarjetaAmarilla:a}};let f=(()=>{class t{constructor(){this.tarjetaIcono=u.c,this.esAmarilla=!1,this.esRoja=!1}ngOnInit(){this.determinarColor()}determinarColor(){1==this.tarjeta.tipoTarjeta?this.esRoja=!0:2==this.tarjeta.tipoTarjeta&&(this.esAmarilla=!0)}}return t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=o.Cb({type:t,selectors:[["app-tarjeta"]],inputs:{tarjeta:"tarjeta"},decls:5,vars:6,consts:[[1,"row"],[1,"col-2"],[1,"col-1"],[3,"icon","ngClass"]],template:function(t,a){1&t&&(o.Lb(0,"div",0),o.Lb(1,"div",1),o.mc(2),o.Kb(),o.Lb(3,"div",2),o.Jb(4,"fa-icon",3),o.Kb(),o.Kb()),2&t&&(o.xb(2),o.oc(" ",a.tarjeta.idParticipante," "),o.xb(2),o.ac("icon",a.tarjetaIcono)("ngClass",o.dc(3,h,a.esRoja,a.esAmarilla)))},directives:[b.a,i.j],styles:[".tarjetaRoja[_ngcontent-%COMP%] { color: red; }",".tarjetaAmarilla[_ngcontent-%COMP%] { color: yellow; }"]}),t})();function m(t,a){if(1&t&&(o.Lb(0,"option",4),o.Lb(1,"span"),o.mc(2),o.Kb(),o.Kb()),2&t){const t=a.$implicit;o.ac("value",t.id),o.xb(2),o.pc("",t.idLocal," - ",t.idVisitante,"")}}function j(t,a){if(1&t){const t=o.Mb();o.Lb(0,"div"),o.Lb(1,"app-partido",5),o.Sb("mostrarTarjeta",(function(a){return o.gc(t),o.Ub().mostrarTarjetas(a)})),o.Kb(),o.Kb()}if(2&t){const t=o.Ub();o.xb(1),o.ac("partido",t.partido)}}function v(t,a){if(1&t&&(o.Lb(0,"div"),o.Jb(1,"app-tarjeta",7),o.Kb()),2&t){const t=a.$implicit;o.xb(1),o.ac("tarjeta",t)}}function g(t,a){if(1&t&&(o.Lb(0,"div"),o.Lb(1,"h3"),o.mc(2,"Tarjetas"),o.Kb(),o.kc(3,v,2,1,"div",6),o.Kb()),2&t){const t=o.Ub();o.xb(3),o.ac("ngForOf",t.tarjetas)}}const P=[{path:"",component:(()=>{class t{constructor(t){this.partidosApi=t,this.partidos=[],this.partido=null,this.muestraTarjetas=!1,this.tarjetas=[]}ngOnInit(){this.partidosApi.getPartidos().subscribe(t=>{this.partidos=this.partidosApi.extraerPartidos(t)})}getPartido(){let t=this.partidos.filter(t=>t.id==this.idPartido)[0];this.partido=t,this.calcularResultado(),this.isTarjetas(),this.mostrarTarjetas(!1)}calcularResultado(){let t=this.partido.sucesos.filter(t=>"Gol"==t.class);this.partido.marcadorLocal=t.filter(t=>t.idParticipante==this.partido.idLocal).length,this.partido.marcadorVisitante=t.filter(t=>t.idParticipante==this.partido.idVisitante).length}isTarjetas(){let t=this.partido.sucesos.filter(t=>"Tarjeta"==t.class).length;this.partido.hayTarjetas=t>0}mostrarTarjetas(t){this.muestraTarjetas=t,t&&(this.tarjetas=this.partido.sucesos.filter(t=>"Tarjeta"==t.class))}}return t.\u0275fac=function(a){return new(a||t)(o.Ib(d))},t.\u0275cmp=o.Cb({type:t,selectors:[["app-partidos"]],decls:7,vars:4,consts:[["for","listaPartidos"],["name","listaPartidos",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[3,"partido","mostrarTarjeta"],[4,"ngFor","ngForOf"],[3,"tarjeta"]],template:function(t,a){1&t&&(o.Lb(0,"div"),o.Lb(1,"label",0),o.mc(2,"Lista partidos"),o.Kb(),o.Lb(3,"select",1),o.Sb("ngModelChange",(function(t){return a.idPartido=t}))("change",(function(){return a.getPartido()})),o.kc(4,m,3,3,"option",2),o.Kb(),o.Kb(),o.kc(5,j,2,1,"div",3),o.kc(6,g,4,1,"div",3)),2&t&&(o.xb(3),o.ac("ngModel",a.idPartido),o.xb(1),o.ac("ngForOf",a.partidos),o.xb(1),o.ac("ngIf",null!=a.idPartido),o.xb(1),o.ac("ngIf",a.muestraTarjetas))},directives:[p.l,p.d,p.g,i.k,i.l,p.h,p.m,l,f],encapsulation:2}),t})()}];let T=(()=>{class t{}return t.\u0275mod=o.Gb({type:t}),t.\u0275inj=o.Fb({factory:function(a){return new(a||t)},imports:[[e.f.forChild(P)],e.f]}),t})(),L=(()=>{class t{constructor(){}}return t.\u0275fac=function(a){return new(a||t)},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),w=(()=>{class t{constructor(t){this.http=t}getPartidosEnvironment(){return s.a.partidos}getPartidosApi(){return null}}return t.\u0275fac=function(a){return new(a||t)(o.Pb(c.a))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),y=(()=>{class t{constructor(t){this.partidosService=t,this.getPartidos=this.partidosService.getPartidosEnvironment}}return t.\u0275fac=function(a){return new(a||t)(o.Pb(w))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),x=(()=>{class t{constructor(t){this.partidosService=t,this.getPartidos=this.partidosService.getPartidosApi}}return t.\u0275fac=function(a){return new(a||t)(o.Pb(w))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const K=t=>"environment"==s.a.obtenedorPartidos?new y(t):"api"==s.a.obtenedorPartidos?new x(t):void 0;let I=(()=>{class t{}return t.\u0275mod=o.Gb({type:t}),t.\u0275inj=o.Fb({factory:function(a){return new(a||t)},providers:[{provide:L,useFactory:K,deps:[w]}],imports:[[i.b,T,p.c,b.b]]}),t})()}}]);