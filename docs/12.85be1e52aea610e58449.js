(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"0I3g":function(t,r,i){"use strict";i.r(r),i.d(r,"ParticipantesModule",(function(){return K}));var e=i("ofXK"),a=i("tyNb");class n{getId(){return this.id}}var o=i("fXoL"),c=i("HDdC");function s(t,r){return new c.a(r?i=>r.schedule(p,0,{error:t,subscriber:i}):r=>r.error(t))}function p({error:t,subscriber:r}){r.error(t)}var b=i("AytR"),u=i("JIr8"),d=i("IheW");let l=(()=>{class t{constructor(t){this.http=t,this.host=b.a.hostHateoas,this.urlEndPointHateoas=this.host+"/participantes/"}getParticipantes(){return this.http.get(this.urlEndPointHateoas+"?page=0&size=1000")}getParticipante(t){return this.http.get(`${this.urlEndPointHateoas}${t}`).pipe(Object(u.a)(t=>(401!==t.status&&t.error.mensaje&&console.error(t.error.mensaje),s(t))))}editarParticipante(t){return this.http.put(`${this.urlEndPointHateoas}/${t.id}`,t).pipe(Object(u.a)(t=>(400===t.status||t.error.mensaje&&console.error(t.error.mensaje),s(t))))}delete(t){return this.http.delete(`${this.urlEndPointHateoas}${t}`).pipe(Object(u.a)(t=>(405===t.status&&console.error("Pide permisos para tocar la BBDD del jefe, y limpia toda la broza que has dejado!"),s(t))))}extraerParticipantes(t){const r=[];return t._embedded.participantes.forEach(t=>{r.push(this.mapearParticipante(t))}),r}mapearParticipante(t){const r=new n;return r.id=t.id,r.nombre=t.nombre,console.log("Dentro mapear",r.id,r.nombre),r}altaParticipante(t){return this.http.post(""+this.urlEndPointHateoas,t).pipe(Object(u.a)(t=>(console.log("error"),400===t.status||t.error.mensaje&&console.error(t.error.mensaje),s(t))))}}return t.\u0275fac=function(r){return new(r||t)(o.Pb(d.a))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=i("3Pt+");let m=(()=>{class t{constructor(t,r,i){this.route=t,this.participanteService=r,this.router=i}ngOnInit(){this.getId(),this.tipoAcceso=this.esAlta?"Alta":"Modificar"}getId(){const t=this.route.snapshot.params.id;null!=t?(this.participanteService.getParticipante(t).subscribe(t=>{this.participante=this.participanteService.mapearParticipante(t),console.log("dentro del suscripcion",this.participante.id)}),console.log("fuera de la subscripcion",this.participante)):(this.esAlta=!0,this.participante=new n,this.participante.id="",this.participante.nombre="")}onEnviar(){this.esAlta?this.participanteService.altaParticipante(this.participante).subscribe(t=>{console.log("Se ha a\xf1adido a ",this.participante.nombre),this.router.navigate(["/participantes"])}):this.participanteService.editarParticipante(this.participante).subscribe(t=>{console.log("Se ha modificado a ",this.participante.nombre),this.router.navigate(["/participantes"])})}}return t.\u0275fac=function(r){return new(r||t)(o.Ib(a.a),o.Ib(l),o.Ib(a.b))},t.\u0275cmp=o.Cb({type:t,selectors:[["app-participante-form"]],decls:19,vars:5,consts:[["formParticipantes","ngForm"],[1,"row"],[1,"col-1"],["for","nombreEquipo"],[1,"col-auto"],["id","nombreEquipo","type","text","name","id","required","",3,"ngModel","ngModelChange"],["for","idEquipo"],["type","text","id","idEquipo","name","nombre","required","",3,"ngModel","readonly","ngModelChange"],["id","botonAceptar",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,r){if(1&t&&(o.Lb(0,"h1"),o.mc(1),o.Kb(),o.Lb(2,"form",null,0),o.Lb(4,"div",1),o.Lb(5,"div",2),o.Lb(6,"label",3),o.mc(7,"Nombre"),o.Kb(),o.Kb(),o.Lb(8,"div",4),o.Lb(9,"input",5),o.Sb("ngModelChange",(function(t){return r.participante.nombre=t})),o.Kb(),o.Kb(),o.Kb(),o.Lb(10,"div",1),o.Lb(11,"div",2),o.Lb(12,"label",6),o.mc(13,"id"),o.Kb(),o.Kb(),o.Lb(14,"div",4),o.Lb(15,"input",7),o.Sb("ngModelChange",(function(t){return r.participante.id=t})),o.Kb(),o.Kb(),o.Kb(),o.Lb(16,"p"),o.Lb(17,"button",8),o.Sb("click",(function(){return r.onEnviar()})),o.mc(18,"Aceptar"),o.Kb(),o.Kb(),o.Kb()),2&t){const t=o.fc(3);o.xb(1),o.oc("",r.tipoAcceso," participante"),o.xb(8),o.ac("ngModel",r.participante.nombre),o.xb(6),o.ac("ngModel",r.participante.id)("readonly",!r.esAlta),o.xb(2),o.ac("disabled",!t.form.valid)}},directives:[h.n,h.e,h.f,h.b,h.k,h.d,h.g],encapsulation:2}),t})(),f=(()=>{class t{constructor(){this.borrar=new o.n}ngOnInit(){this.rutaEditar="editar/"+this.participante.id}onBorrar(t){console.log("empezamos el borrado"),this.borrar.emit(t)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=o.Cb({type:t,selectors:[["app-participante"]],inputs:{participante:"participante"},outputs:{borrar:"borrar"},decls:9,vars:2,consts:[[1,"row"],[1,"col-2"],[1,"col-auto"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(o.Lb(0,"div",0),o.Lb(1,"div",1),o.mc(2),o.Kb(),o.Lb(3,"div",2),o.Lb(4,"button",3),o.mc(5,"Editar"),o.Kb(),o.Kb(),o.Lb(6,"div",2),o.Lb(7,"button",4),o.Sb("click",(function(){return r.onBorrar(r.participante.id)})),o.mc(8,"Borrar"),o.Kb(),o.Kb(),o.Kb()),2&t&&(o.xb(2),o.nc(r.participante.nombre),o.xb(2),o.bc("routerLink",r.rutaEditar))},directives:[a.c],encapsulation:2}),t})();function g(t,r){if(1&t){const t=o.Mb();o.Lb(0,"div"),o.Lb(1,"app-participante",5),o.Sb("borrar",(function(r){return o.gc(t),o.Ub().borrarParticipante(r)})),o.Kb(),o.Kb()}if(2&t){const t=r.$implicit;o.xb(1),o.ac("participante",t)}}const v=[{path:"",component:(()=>{class t{constructor(t){this.participanteService=t,this.participantes=[]}ngOnInit(){this.participanteService.getParticipantes().subscribe(t=>{this.participantes=this.participanteService.extraerParticipantes(t)})}borrarParticipante(t){this.participanteService.delete(t).subscribe(r=>{console.log("se elimino a ",t,r.status),this.participantes=this.participantes.filter(r=>r.id!=t)})}}return t.\u0275fac=function(r){return new(r||t)(o.Ib(l))},t.\u0275cmp=o.Cb({type:t,selectors:[["app-participantes"]],decls:8,vars:1,consts:[[1,"row"],[1,"col-10"],[1,"col-2"],["routerLink","alta",1,"btn","btn-primary"],[4,"ngFor","ngForOf"],[3,"participante","borrar"]],template:function(t,r){1&t&&(o.Lb(0,"div",0),o.Lb(1,"div",1),o.Lb(2,"h2"),o.mc(3,"Participantes"),o.Kb(),o.Kb(),o.Lb(4,"div",2),o.Lb(5,"button",3),o.mc(6,"Alta participante"),o.Kb(),o.Kb(),o.Kb(),o.kc(7,g,2,1,"div",4)),2&t&&(o.xb(7),o.ac("ngForOf",r.participantes))},directives:[a.c,e.k,f],encapsulation:2}),t})()},{path:"alta",component:m},{path:"editar/:id",component:m}];let L=(()=>{class t{}return t.\u0275mod=o.Gb({type:t}),t.\u0275inj=o.Fb({factory:function(r){return new(r||t)},imports:[[a.f.forChild(v)],a.f]}),t})(),K=(()=>{class t{}return t.\u0275mod=o.Gb({type:t}),t.\u0275inj=o.Fb({factory:function(r){return new(r||t)},imports:[[e.b,L,h.c]]}),t})()}}]);